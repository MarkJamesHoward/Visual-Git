---
import Layout from "../layouts/Layout.astro";
import WindowsLogo from "../images/windows_logo_download.png";
import LinuxLogo from "../images/linux_logo_download.png";
import AppleLogo from "../images/apple_logo_download.png";

const appVersion = import.meta.env.APP_VERSION || "1.0.0";
---

<Layout title="VisualGIT">
  <div>
    <section
      class="margin-bottom:xl md?margin-bottom:2xl background-color:c1background1"
    >
      <div class="padding:md text-align:center">
        <div class="color:c1text2 font-size:lg">
          <div
            class="max-width:60ch text-align:center place-self:center padding-left:lg padding-right:lg md?padding-left:xl md?padding-right:xl"
          >
            <p class="mainFont">
              Choose your operating system and download the VisualGit
              application
            </p>
            <p class="mainFont font-size:sm margin-top:sm color:c1text2">
              Current version: <strong>{appVersion}</strong>
            </p>
          </div>
          <div class="color:c1background3">
            <div
              class="display:flex flex-direction:column lg?flex-direction:row justify-content:space-between padding-top:xl"
            >
              <div
                style="flex-basis:33%"
                class="text-align:center flex-basis:33% flex-grow:1 flex-shrink:1 margin-left:xl margin-right:xl margin-top:md lg?margin-top:0px"
              >
                <div
                  class="display:flex flex-direction:row justify-content:center"
                >
                  <div
                    class="margin-top:sm display:flex flex-direction:column padding:md"
                  >
                    <div
                      class="display:flex flex-direction:column sm?flex-direction:row"
                    >
                      <div>
                                        <a
                                          id="DownloadButtonx64Windows"
                                          data-download-os="windows"
                                          href="https://github.com/MarkJamesHoward/Visual-Git/releases/latest/download/visualgit-win-x64.exe"
                          class="display:flex margin:md text-decoration:none justify-content:center background-color:c1background2 place-items:center padding:lg font-size:md text-align:center border-radius:10px"
                        >
                          <div
                            class="display:flex flex-direction:column color:c1background3"
                          >
                            <div
                              class="display:flex flex-direction:column align-items:center justify-content:center gap:xs display:block sm?display:none"
                            >
                              <img
                                src={WindowsLogo.src}
                                alt="Windows x64"
                                class="os-download-img"
                              />
                              <div>Windows x64</div>
                            </div>
                            <div
                              class="display:none sm?display:flex flex-direction:column align-items:center font-size:lg sm?padding:xl"
                            >
                              <img
                                src={WindowsLogo.src}
                                alt="Windows x64"
                                class="os-download-img"
                              />
                              Download x64
                              <div>(Windows)</div>
                            </div>
                          </div>
                        </a>

                             </div>

                      <a
                        id="DownloadButtonLinux"
                        data-download-os="linux"
                        href="https://github.com/MarkJamesHoward/Visual-Git/releases/latest/download/visualgit-linux-amd64.deb"
                        class="display:flex margin:md text-decoration:none justify-content:center background-color:c1background2 place-items:center padding:lg font-size:md text-align:center border-radius:10px"
                      >
                        <div
                          class="display:flex flex-direction:column color:c1background3"
                        >
                          <div
                            class="display:flex flex-direction:column align-items:center justify-content:center gap:xs display:block sm?display:none"
                          >
                            <img
                              src={LinuxLogo.src}
                              alt="Linux"
                              class="os-download-img"
                            />
                            <div>Linux (.deb)</div>
                          </div>
                          <div
                            class="display:none sm?display:flex flex-direction:column align-items:center font-size:lg sm?padding:xl"
                          >
                            <img
                              src={LinuxLogo.src}
                              alt="Linux"
                              class="os-download-img"
                            />
                            Download
                            <div>(Linux .deb)</div>
                          </div>
                        </div>
                      </a>

                      <div>
                        <a
                          id="DownloadButtonMacOSARM"
                          data-download-os="macos"
                          href="https://github.com/MarkJamesHoward/Visual-Git/releases/latest/download/visualgit-mac-arm64.dmg"
                          class="display:flex margin:md text-decoration:none justify-content:center background-color:c1background2 place-items:center padding:lg font-size:md text-align:center border-radius:10px"
                        >
                          <div
                            class="display:flex flex-direction:column color:c1background3"
                          >
                            <div
                              class="display:flex flex-direction:column align-items:center justify-content:center gap:xs display:block sm?display:none"
                            >
                              <img
                                src={AppleLogo.src}
                                alt="MacOS ARM"
                                class="os-download-img"
                              />
                              <div>MacOS ARM</div>
                            </div>
                            <div
                              class="display:none sm?display:flex flex-direction:column align-items:center font-size:lg sm?padding:xl"
                            >
                              <img
                                src={AppleLogo.src}
                                alt="MacOS ARM"
                                class="os-download-img"
                              />
                              Download
                              <div>(MacOS ARM)</div>
                            </div>
                          </div>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="display:flex flex-direction:column place-items:center margin-top:xl padding:lg color:c1text2">
              <h2 class="titleFont font-size:lg margin-bottom:md">How to run</h2>
              <div class="max-width:60ch text-align:left">
                <p class="margin-bottom:sm">
                  <strong>Windows:</strong> Download the .exe installer and run it. Launch Visual Git from the Start menu.
                </p>
                <p class="margin-bottom:sm">
                  <strong>macOS (Apple Silicon):</strong> Open the .dmg, drag Visual Git to Applications. Before opening for the first time, run this command in Terminal:
                </p>
                <code class="background-color:c1background2 color:c1text2 padding:md border-radius:10px font-size:md margin-bottom:sm display:block">
                  xattr -cr "/Applications/Visual Git.app"
                </code>
                <p class="margin-bottom:sm font-size:sm">
                  Then open it from Launchpad. This is only needed once after installation.
                </p>
                <p>
                  <strong>Linux (Ubuntu/Debian):</strong> Download the .deb package and install:
                </p>
                <code class="background-color:c1background2 color:c1text2 padding:md border-radius:10px font-size:md margin-top:md display:block">
                  sudo apt install ./visualgit-linux-amd64.deb
                </code>
              </div>
            </div>

            <style>
              .os-download-img {
                height: 48px;
                width: 48px;
                margin-bottom: 8px;
                transition:
                  height 0.2s,
                  width 0.2s;
              }
              @media (max-width: 600px) {
                .os-download-img {
                  height: 32px;
                  width: 32px;
                }
              }
              .download-btn-hover {
                transition: transform 0.18s cubic-bezier(0.4, 0, 0.2, 1);
              }
              .download-btn-hover:hover {
                transform: scale(1.045);
              }
            </style>

            <script>
              // Add the hover class to all download buttons
              if (typeof window !== "undefined") {
                window.addEventListener("DOMContentLoaded", () => {
                  document
                    .querySelectorAll('a[id^="DownloadButton"]')
                    .forEach((btn) => {
                      btn.classList.add("download-btn-hover");
                    });
                });
              }
            </script>
          </div>

          <script type="module" src="../EventHandlersForDownloadButton.ts"></script>
        </div>
      </div>
    </section>
  </div></Layout
>
