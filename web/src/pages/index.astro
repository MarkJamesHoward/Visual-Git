---
import Layout from "../layouts/Layout.astro";

import SampleScreenShot from "../images/HiResVisualGit.png";

// Step images: a = terminal, b = mainscreen
import MainScreen1 from "../images/step1b-mainscreen.png";
import MainScreen2 from "../images/step2b-mainscreen.png";
import MainScreen3 from "../images/step3b-mainscreen.png";
import WindowsLogo from "../images/windows_logo_download.png";
import LinuxLogo from "../images/linux_logo_download.png";
import AppleLogo from "../images/apple_logo_download.png";
import ElectronOpenRepoScreenshot from "../images/electron_open_repo_screenshot.png";

import "../styles/mimic.css";
---

<Layout title="VisualGIT">
  <div class="margin-bottom:xl md?margin-bottom:2xl">
    <div class="text-align:center">
      <div class="color:c1text2 font-size:lg background:c5background1">
        <p class="text-align:center place-self:center padding:lg">
          See exactly what happens inside Git when you run commands
        </p>

        <!-- Animated hero: 3 steps with typing terminal -->
        <div class="hero-slideshow">
          <!-- Left: Animated terminal -->
          <div class="hero-left">
            <div class="terminal">
              <div class="terminal-header">
                <span class="terminal-dot terminal-dot-red"></span>
                <span class="terminal-dot terminal-dot-yellow"></span>
                <span class="terminal-dot terminal-dot-green"></span>
                <span class="terminal-title">Terminal</span>
              </div>
              <div class="terminal-body">
                <!-- Step 1: Edit file -->
                <div class="terminal-step terminal-step-1">
                  <div class="terminal-line">
                    <span class="terminal-prompt">$</span>
                    <span class="terminal-typing typing-1">echo "Hello World" &gt;&gt; data.txt</span>
                  </div>
                  <div class="terminal-output terminal-output-1">File updated</div>
                </div>
                <!-- Step 2: git add -->
                <div class="terminal-step terminal-step-2">
                  <div class="terminal-line">
                    <span class="terminal-prompt">$</span>
                    <span class="terminal-typing typing-2">git add .</span>
                  </div>
                  <div class="terminal-output terminal-output-2">Changes staged for commit</div>
                </div>
                <!-- Step 3: git commit -->
                <div class="terminal-step terminal-step-3">
                  <div class="terminal-line">
                    <span class="terminal-prompt">$</span>
                    <span class="terminal-typing typing-3">git commit -m "add data"</span>
                  </div>
                  <div class="terminal-output terminal-output-3">[main abc1234] add data<br/>1 file changed</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Arrow (appears after terminal updates, before mainscreen) -->
          <div class="hero-arrow">
            <span class="arrow-pulse arrow-pulse-1">→</span>
            <span class="arrow-pulse arrow-pulse-2">→</span>
            <span class="arrow-pulse arrow-pulse-3">→</span>
          </div>

          <!-- Right: Visual Git main screen -->
          <div class="hero-right">
            <div class="hero-mainscreen-stack">
              <img class="hero-img hero-img-1" src={MainScreen1.src} alt="Visual Git showing working directory change" />
              <img class="hero-img hero-img-2" src={MainScreen2.src} alt="Visual Git showing staged file" />
              <img class="hero-img hero-img-3" src={MainScreen3.src} alt="Visual Git showing committed changes" />
            </div>
          </div>

          <!-- Showcase: Final image zoomed and centered at end of cycle -->
          <div class="hero-showcase">
            <img src={MainScreen3.src} alt="Visual Git final result" />
          </div>

          <!-- Step indicators -->
          <div class="hero-indicators">
            <span class="hero-dot hero-dot-1"></span>
            <span class="hero-dot hero-dot-2"></span>
            <span class="hero-dot hero-dot-3"></span>
          </div>
        </div>

        <div
          class="max-width:50ch text-align:left place-self:center padding-left:lg padding-right:lg md?padding-left:xl md?padding-right:xl"
        >
          <p>
            With Visual Git you can visualize the effects of Git commands on
            your own local repository.
          </p>

          <p>
            Knowing what happens to Git internally when we for example Rebase,
            Revert or Reset will give you much more confidence in performing
            these commands
          </p>
        </div>
        <div class="background:c5background2 color:c5text1 fade-in-on-scroll">
          <div
            class="display:flex flex-direction:column lg?flex-direction:row justify-content:space-between align-items:stretch padding-top:xl"
          >
            <div
              style="flex-basis:33%"
              class="text-align:center flex-basis:33% flex-grow:1 flex-shrink:1 margin-left:xl margin-right:xl margin-top:xl lg?margin-top:0px"
            >
              <div
                class="font-size:lg titleFont font-weight:xl lg?font-weight:xl lg?font-size:xl margin-bottom:xl"
              >
                Step 1
              </div>

              <div class="display:flex flex-direction:column place-items:center margin-top:md margin-bottom:md">
                <div class="margin-bottom:md color:c5text1 font-size:sm">
                  Download the Visual Git desktop app
                </div>

                <div class="display:flex flex-direction:column sm?flex-direction:row gap:sm align-items:center justify-content:center">
                  <a
                    href="https://github.com/MarkJamesHoward/Visual-Git/releases/latest/download/visualgit-win-x64.exe"
                    data-download-os="windows"
                    class="display:flex text-decoration:none justify-content:center background-color:c1background2 place-items:center padding:sm font-size:sm text-align:center border-radius:10px index-download-btn"
                  >
                    <div class="display:flex flex-direction:column color:c1background3">
                      <img
                        src={WindowsLogo.src}
                        alt="Windows"
                        class="os-download-img index-download-img"
                      />
                      <div>Windows</div>
                    </div>
                  </a>

                  <a
                    href="https://github.com/MarkJamesHoward/Visual-Git/releases/latest/download/visualgit-mac-arm64.dmg"
                    data-download-os="macos"
                    class="display:flex text-decoration:none justify-content:center background-color:c1background2 place-items:center padding:sm font-size:sm text-align:center border-radius:10px index-download-btn"
                  >
                    <div class="display:flex flex-direction:column color:c1background3">
                      <img
                        src={AppleLogo.src}
                        alt="macOS"
                        class="os-download-img index-download-img"
                      />
                      <div>macOS</div>
                    </div>
                  </a>

                  <a
                    href="https://github.com/MarkJamesHoward/Visual-Git/releases/latest/download/visualgit-linux-x86_64.AppImage"
                    data-download-os="linux"
                    class="display:flex text-decoration:none justify-content:center background-color:c1background2 place-items:center padding:sm font-size:sm text-align:center border-radius:10px index-download-btn"
                  >
                    <div class="display:flex flex-direction:column color:c1background3">
                      <img
                        src={LinuxLogo.src}
                        alt="Linux"
                        class="os-download-img index-download-img"
                      />
                      <div>Linux</div>
                    </div>
                  </a>
                </div>
              </div>

            </div>

            <div
              style="flex-basis:33%"
              class="text-align:center flex-basis:33% flex-grow:1 flex-shrink:1 margin-left:xl margin-right:xl margin-top:xl lg?margin-top:0px"
            >
              <div
                class="font-size:lg titleFont font-weight:xl lg?font-weight:xl lg?font-size:xl margin-bottom:xl"
              >
                Step 2
              </div>
              <p class="text-align:center">
                Launch Visual Git and pick your repository
              </p>

              <div class="display:flex flex-direction:column place-items:center margin-top:md">
                <img
                  src={ElectronOpenRepoScreenshot.src}
                  alt="Visual Git desktop app welcome screen"
                  style="width:100%; max-width:420px; border-radius:12px; box-shadow:0 6px 24px rgba(0,0,0,0.35);"
                />
              </div>
            </div>

            <div
              style="flex-basis:33%"
              class="text-align:center flex-basis:33% flex-grow:1 flex-shrink:1 margin-left:xl margin-right:xl margin-top:xl lg?margin-top:0px"
            >
              <div
                class="font-size:lg titleFont font-weight:xl lg?font-weight:xl lg?font-size:xl margin-bottom:xl"
              >
                Step 3
              </div>
              <p class="text-align:center color:c5text1">
                Experiment and learn
              </p>

              <div class="display:flex flex-direction:column place-items:center margin-top:md padding:md">
                <div class="max-width:420px">
                  <p class="color:c5text1 line-height:1.6 text-align:left margin-bottom:md">
                    Make changes to your repo and watch the visualization update in realtime. Branch, commit, rebase, merge &mdash; see exactly how each command affects your repository internals.
                  </p>
                  <p class="color:c5text1 text-align:left">
                    Build confidence with commands like <strong>git reset --hard</strong>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="color:c1text2 padding-bottom:xl">
          <div
            class="slide-in-right-on-scroll display:flex flex-direction:column lg?flex-direction:row lg?justify-content:flex-end"
          >
            <div class="display:flex flex-direction:column">
              <div
                class="font-size:xl titleFont margin-top:xl padding:md color:#c1text2"
              >
                Visualization Features
              </div>
              <div class="display:flex flex-direction:column margin-top:md">
                <div
                  class="max-width:40ch font-size:lg text-align:left align-self:left padding-left:xl padding-right:xl"
                >
                  <p>
                    Using this integration should be performed with minimal
                    commits to the repo, maybe 10 would be the optimal,
                    otherwise the graph gets too complicated.
                  </p>

                  <p>
                    It is designed to be used for learning the changes that
                    occur to the repo when issuing simple command such as
                    branching, rebasing, squashing etc.
                  </p>
                </div>
                <a
                  class="color:c1text2 color:white:hover margin-top:lg font-size:md margin-bottom:lg"
                  href="/usinglivevisualisation">More Details</a
                >
              </div>
            </div>
            <div class="lg?width:200px" style="visibility:hidden"></div>
          </div>
        </div>

        <div
          class="slide-in-left-on-scroll background:c5background2 padding-top:xl padding-bottom:xl display:flex flex-direction:column lg?flex-direction:row lg?padding-right:200px"
        >
          <div style="visibility:hidden" class="lg?width:200px"></div>

          <div class="display:flex flex-direction:column color:c5text1">
            <div class="font-size:xl titleFont margin-bottom:xl">
              Visual Git in Action
            </div>
            <div class="display:flex flex-direction:column margin-top:md">
              <div
                class="max-width:40ch font-size:lg text-align:left align-self:left padding-left:xl padding-right:xl"
              >
                Want to see VisualGit in action? There are lots of videos
                demonstrating how VisualGit can be used on the A Shot Of Code
                YouTube channel. Here are some picks:
              </div>
              <a
                class="color:c5text1 color:white:hover margin-top:lg font-size:md margin-bottom:lg"
                href="/tutorials/">Tutorials</a
              >
            </div>
          </div>
        </div>

        <div class="slide-up-fade-in-on-scroll">
          <div>
            <div
              class="font-size:lg titleFont margin-top:xl padding-bottom:xl padding-top:md font-weight:lg color:c5text2"
            >
              <div>Enjoying using VisualGit?</div>
              <div>All support much appreciated here thanks</div>
            </div>
            <a
              href="https://www.buymeacoffee.com/ashotofcode"
              target="_blank"
              class="text-decoration:underline color:white:hover margin-top:lg color:c1text2"
            >
              <div class="font-size:lg padding-bottom:2xl">buy me a coffee</div>
            </a>
          </div>

          <script
            async
            src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6571414832573314"
            crossorigin="anonymous"></script>
          <!-- VisualGitHomePage -->
          <ins
            class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-6571414832573314"
            data-ad-slot="4362210660"
            data-ad-format="auto"
            data-full-width-responsive="true"></ins>
          <script>
            const adsbygoogle = (window as any).adsbygoogle || [];
            (window as any).adsbygoogle = adsbygoogle;
            adsbygoogle.push({});
          </script>
        </div>
      </div>
    </div>
  </div>
</Layout>

<style>
  /* Scoped styles for Steps 1-3 terminal cards */
  .terminal-card-link {
    text-decoration: none;
  }

  .terminal-card-link:hover {
    text-decoration: underline;
  }

  .index-download-btn {
    width: 140px;
    min-height: 108px;
  }

  .index-download-img {
    height: 36px;
    width: 36px;
    margin-bottom: 6px;
  }

  /*
   * Hero slideshow - 20s total cycle:
   * Steps 1-3: 0-15s (5s each)
   * Showcase: 15-20s (final image zooms and centers)
   */
  .hero-slideshow {
    display: flex;
    align-items: center;
    gap: 24px;
    width: 90%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px 0 40px;
    position: relative;
  }

  .hero-left {
    flex: 0.35;
    display: flex;
    flex-direction: column;
    gap: 4px;
    animation: hero-panel-hide 20s infinite;
  }

  .hero-right {
    flex: 0.55;
    animation: hero-panel-hide 20s infinite;
  }

  .hero-arrow {
    flex: 0.1;
    font-size: 3rem;
    color: #4ade80;
    text-align: center;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: hero-panel-hide 20s infinite;
  }

  /* Hide terminal, arrow, and right panel during showcase (75-100% = 15-20s) */
  @keyframes hero-panel-hide {
    0%, 72% { opacity: 1; }
    75%, 97% { opacity: 0; }
    100% { opacity: 1; }
  }

  /* Showcase: centered zoomed image */
  .hero-showcase {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    animation: hero-showcase 20s infinite;
    pointer-events: none;
  }

  .hero-showcase img {
    max-width: 85%;
    max-height: 100%;
    object-fit: contain;
    transform: scale(0.9);
    animation: hero-showcase-zoom 20s infinite;
  }

  @keyframes hero-showcase {
    0%, 72% { opacity: 0; }
    78%, 95% { opacity: 1; }
    100% { opacity: 0; }
  }

  @keyframes hero-showcase-zoom {
    0%, 72% { transform: scale(0.9); }
    78% { transform: scale(1.05); }
    95% { transform: scale(1.05); }
    100% { transform: scale(0.9); }
  }

  /*
   * Animated Terminal styling
   * 20s total cycle, 5s per step (steps 1-3), then 5s showcase
   */

  .terminal {
    background: #1a1a2e;
    border-radius: 8px;
    overflow: hidden;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 0.9rem;
    box-shadow: 0 4px 20px rgba(0,0,0,0.4);
  }

  .terminal-header {
    background: #2d2d44;
    padding: 8px 12px;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .terminal-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
  }
  .terminal-dot-red { background: #ff5f56; }
  .terminal-dot-yellow { background: #ffbd2e; }
  .terminal-dot-green { background: #27ca40; }

  .terminal-title {
    margin-left: 8px;
    color: #888;
    font-size: 0.8rem;
  }

  .terminal-body {
    padding: 16px;
    min-height: 120px;
    position: relative;
  }

  .terminal-step {
    position: absolute;
    inset: 16px;
    opacity: 0;
  }

  .terminal-step-1 { animation: terminal-step-show 20s infinite step-end; animation-delay: 0s; }
  .terminal-step-2 { animation: terminal-step-show 20s infinite step-end; animation-delay: 5s; }
  .terminal-step-3 { animation: terminal-step-show 20s infinite step-end; animation-delay: 10s; }

  @keyframes terminal-step-show {
    0%, 25% { opacity: 1; }
    25.01%, 100% { opacity: 0; }
  }

  .terminal-line {
    display: flex;
    gap: 8px;
    margin-bottom: 8px;
  }

  .terminal-prompt {
    color: #4ade80;
  }

  .terminal-typing {
    color: #e2e8f0;
    overflow: hidden;
    white-space: nowrap;
    width: 0;
    border-right: 2px solid #4ade80;
  }

  /* Typing animations - 20s cycle, each step is 5s (25% of cycle) */
  .typing-1 {
    animation:
      typing-1 20s infinite step-end,
      blink 0.7s step-end infinite;
  }
  .typing-2 {
    animation:
      typing-2 20s infinite step-end,
      blink 0.7s step-end infinite;
  }
  .typing-3 {
    animation:
      typing-3 20s infinite step-end,
      blink 0.7s step-end infinite;
  }

  /* Step 1 (0-5s = 0-25%): types "echo "Hello World" >> data.txt" (34 chars) */
  @keyframes typing-1 {
    0% { width: 0; }
    1.5% { width: 2ch; }
    3% { width: 5ch; }
    4.5% { width: 10ch; }
    6% { width: 20ch; }
    7.5% { width: 34ch; border-right-color: transparent; }
    25% { width: 34ch; border-right-color: transparent; }
    25.01%, 100% { width: 0; border-right-color: #4ade80; }
  }

  /* Step 2 (5-10s = 25-50%): types "git add ." (10 chars) */
  @keyframes typing-2 {
    0%, 25% { width: 0; }
    26.5% { width: 3ch; }
    28% { width: 7ch; }
    30% { width: 10ch; border-right-color: transparent; }
    50% { width: 10ch; border-right-color: transparent; }
    50.01%, 100% { width: 0; border-right-color: #4ade80; }
  }

  /* Step 3 (10-15s = 50-75%): types "git commit -m "add data"" (25 chars) */
  @keyframes typing-3 {
    0%, 50% { width: 0; }
    51% { width: 3ch; }
    52.5% { width: 10ch; }
    54.5% { width: 18ch; }
    57% { width: 25ch; border-right-color: transparent; }
    75% { width: 25ch; border-right-color: transparent; }
    75.01%, 100% { width: 0; border-right-color: #4ade80; }
  }

  @keyframes blink {
    50% { border-right-color: transparent; }
  }

  .terminal-output {
    color: #94a3b8;
    font-size: 0.85rem;
    opacity: 0;
    margin-top: 8px;
  }

  /* Output appears after typing completes - 20s cycle */
  .terminal-output-1 { animation: output-show-1 20s infinite step-end; }
  .terminal-output-2 { animation: output-show-2 20s infinite step-end; }
  .terminal-output-3 { animation: output-show-3 20s infinite step-end; }

  @keyframes output-show-1 {
    0%, 8% { opacity: 0; }
    9%, 25% { opacity: 1; }
    25.01%, 100% { opacity: 0; }
  }
  @keyframes output-show-2 {
    0%, 33% { opacity: 0; }
    34%, 50% { opacity: 1; }
    50.01%, 100% { opacity: 0; }
  }
  @keyframes output-show-3 {
    0%, 58% { opacity: 0; }
    59%, 75% { opacity: 1; }
    75.01%, 100% { opacity: 0; }
  }

  /* Arrow: pulse after terminal output appears - 20s cycle */
  .arrow-pulse {
    position: absolute;
    opacity: 0;
  }
  .arrow-pulse-1 { animation: hero-arrow 20s infinite; animation-delay: 2s; }
  .arrow-pulse-2 { animation: hero-arrow 20s infinite; animation-delay: 7s; }
  .arrow-pulse-3 { animation: hero-arrow 20s infinite; animation-delay: 12s; }

  @keyframes hero-arrow {
    0% { opacity: 0; transform: translateX(-10px); }
    3% { opacity: 1; transform: translateX(0); }
    7% { opacity: 1; transform: translateX(8px); }
    10% { opacity: 0; transform: translateX(15px); }
    100% { opacity: 0; }
  }

  /* Mainscreen: crossfade between images, hide during showcase - 20s cycle */
  .hero-mainscreen-stack .hero-img-1 {
    animation: hero-main-1 20s infinite;
  }
  .hero-mainscreen-stack .hero-img-2 {
    animation: hero-main-2 20s infinite;
  }
  .hero-mainscreen-stack .hero-img-3 {
    animation: hero-main-3 20s infinite;
  }

  /* 20s cycle: steps 0-15s (75%), showcase 15-20s (75-100%)
   * Image 1: visible from start (0%) until step 2 takes over (~8s = 40%)
   * Image 2: visible ~8s to ~13s (37-65%)
   * Image 3: visible ~13s to showcase start (62-75%)
   */
  @keyframes hero-main-1 {
    0% { opacity: 1; }
    37% { opacity: 1; }
    42% { opacity: 0; }
    100% { opacity: 0; }
  }

  @keyframes hero-main-2 {
    0%, 37% { opacity: 0; }
    42% { opacity: 1; }
    62% { opacity: 1; }
    67% { opacity: 0; }
    100% { opacity: 0; }
  }

  @keyframes hero-main-3 {
    0%, 62% { opacity: 0; }
    67% { opacity: 1; }
    72% { opacity: 1; }
    75% { opacity: 0; }
    100% { opacity: 0; }
  }

  .hero-mainscreen-stack {
    position: relative;
    width: 100%;
    aspect-ratio: 4 / 3;
  }

  .hero-img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    opacity: 0;
    transition: opacity 0.5s ease;
  }

  .hero-indicators {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 10px;
  }

  .hero-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: rgba(255,255,255,0.3);
  }

  .hero-dot-1 { animation: hero-dot-active 20s infinite step-end; animation-delay: 0s; }
  .hero-dot-2 { animation: hero-dot-active 20s infinite step-end; animation-delay: 5s; }
  .hero-dot-3 { animation: hero-dot-active 20s infinite step-end; animation-delay: 10s; }

  @keyframes hero-dot-active {
    0%, 25% { background: rgba(255,255,255,1); }
    25.01%, 100% { background: rgba(255,255,255,0.3); }
  }

  /* Hide indicators during showcase */
  .hero-indicators {
    animation: hero-panel-hide 20s infinite;
  }

  @media (max-width: 768px) {
    .hero-slideshow {
      flex-direction: column;
      gap: 16px;
    }
    .hero-left, .hero-right {
      flex: none;
      width: 100%;
    }
    .hero-arrow {
      transform: rotate(90deg);
      font-size: 2rem;
    }
  }
</style>

<script type="module" src="../EventHandlersForDownloadButton.ts"></script>

<script is:inline>
  // Fade-in on scroll for Step 1, 2, 3 sections
  function fadeInOnScroll() {
    const elements = document.querySelectorAll(".fade-in-on-scroll");
    const observer = new window.IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("fade-in-visible");
          }
        });
      },
      { threshold: 0.1 }
    );
    elements.forEach((el) => observer.observe(el));
  }

  // Slide-in from right for main visualisation section
  function slideInRightOnScroll() {
    const elements = document.querySelectorAll(".slide-in-right-on-scroll");
    const observer = new window.IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("slide-in-right-visible");
          }
        });
      },
      { threshold: 0.1 }
    );
    elements.forEach((el) => observer.observe(el));
  }

  if (typeof window !== "undefined") {
    window.addEventListener("DOMContentLoaded", slideInRightOnScroll);
  }

  // Slide-in from left for Visual Git in Action section
  function slideInLeftOnScroll() {
    const elements = document.querySelectorAll(".slide-in-left-on-scroll");
    const observer = new window.IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("slide-in-left-visible");
          }
        });
      },
      { threshold: 0.1 }
    );
    elements.forEach((el) => observer.observe(el));
  }

  // Slide-up and fade-in for 'Enjoying using VisualGit?' section
  function slideUpFadeInOnScroll() {
    const elements = document.querySelectorAll(".slide-up-fade-in-on-scroll");
    const observer = new window.IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("slide-up-fade-in-visible");
          }
        });
      },
      { threshold: 0.1 }
    );
    elements.forEach((el) => observer.observe(el));
  }

  fadeInOnScroll();
  slideInRightOnScroll();
  slideInLeftOnScroll();
  slideUpFadeInOnScroll();
</script>
